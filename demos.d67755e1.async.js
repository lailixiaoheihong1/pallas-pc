(self.webpackChunk_quansitech_pallas_pc=self.webpackChunk_quansitech_pallas_pc||[]).push([[433],{64699:function(k,I,e){"use strict";e.r(I);var A=e(15009),u=e.n(A),E=e(99289),d=e.n(E),Z=e(5574),i=e.n(Z),F=e(36818),B=e(47527),se=e(34176),H=e(70416),ue=e(78957),_=e(89779),w=e(67294),c=e(85893);I.default=function(){var ie=(0,w.useState)(!1),q=i()(ie,2),J=q[0],K=q[1],le=F.l.useForm(),oe=i()(le,1),ee=oe[0],de=function(){var b=d()(u()().mark(function g(a){return u()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return console.log(a),K(!0),O.next=4,fetch("/api/submit",{method:"POST",body:JSON.stringify(a)});case 4:K(!1);case 5:case"end":return O.stop()}},g)}));return function(a){return b.apply(this,arguments)}}(),ce=function(){var b=d()(u()().mark(function g(a){var R,O;return u()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return console.log(a),D.next=3,fetch("/api/Staging?name=".concat(a));case 3:return R=D.sent,D.next=6,R.json();case 6:return O=D.sent,D.abrupt("return",O);case 8:case"end":return D.stop()}},g)}));return function(a){return b.apply(this,arguments)}}(),z=function(){var b=d()(u()().mark(function g(a){var R;return u()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return console.log(a.form_name,a.form_data),y.next=3,fetch("/api/Staging",{method:"POST",body:JSON.stringify(a)});case 3:return R=y.sent,y.next=6,R.json();case 6:return y.abrupt("return",y.sent);case 7:case"end":return y.stop()}},g)}));return function(a){return b.apply(this,arguments)}}();return(0,c.jsx)("div",{children:(0,c.jsxs)(F.l,{name:"assitanceListForm",form:ee,labelWrap:!0,labelCol:{span:8},onFinish:de,submitting:J,children:[(0,c.jsx)(F.l.Item,{hidden:!0,name:"assistance_list_id",children:(0,c.jsx)(B.Z,{})}),(0,c.jsx)(F.l.Item,{name:"amount",label:"\u6551\u52A9\u91D1\u989D",rules:[{required:!0}],hasFeedback:!0,children:(0,c.jsx)(se.Z,{addonAfter:"\u5143/\u5E74",min:0,precision:2,controls:!1})}),(0,c.jsx)(F.l.Item,{name:"start_date",label:"\u5F00\u59CB\u65F6\u95F4",children:(0,c.jsx)(H.Z,{})}),(0,c.jsx)(F.l.Item,{name:"file",label:"\u6587\u4EF6",children:(0,c.jsx)(F.g,{action:"/api/upload"})}),(0,c.jsx)(F.l.Buttons,{draft:!0,form:ee,initFn:ce,saveFn:z,children:(0,c.jsxs)(ue.Z,{children:[(0,c.jsx)(_.ZP,{type:"primary",htmlType:"submit",loading:J,children:"\u786E\u5B9A"}),(0,c.jsx)(_.ZP,{onClick:function(){},children:"\u53D6\u6D88"})]})})]})})}},33198:function(k,I,e){"use strict";e.r(I);var A=e(36818),u=e(67294),E=e(85893);I.default=function(){var d=function(i){console.log(i)};return(0,E.jsx)("div",{children:(0,E.jsx)(A.g,{action:"https://raw.githubusercontent.com/lailixiaoheihong1/pallas-h5/master/apiData/upload.json",tips:"\u4E0A\u4F20\u7EC4\u4EF6",accept:"jpg",maxCount:1,onChange:d})})}},36818:function(k,I,e){"use strict";e.d(I,{l:function(){return S},g:function(){return Pe}});var A=e(5574),u=e.n(A),E=e(97857),d=e.n(E),Z=e(15009),i=e.n(Z),F=e(99289),B=e.n(F),se=e(13769),H=e.n(se),ue=e(28459),_=e(32744),w=e(10154),c=e(89779),ie=e(41202),q=e(27484),J=e.n(q),K=e(67294),le=e(12444),oe=e.n(le),ee=e(72004),de=e.n(ee),ce=e(9783),z=e.n(ce),b=function(){function v(n,f,l,j){oe()(this,v),z()(this,"id",void 0),z()(this,"uid",void 0),z()(this,"url",void 0),z()(this,"name",void 0),this.id=n,this.uid=f,this.url=l,this.name=j}return de()(v,[{key:"toObject",value:function(){return{id:this.id,uid:this.uid,url:this.url,name:this.name}}},{key:"serialize",value:function(){return{type:"UploadFile",value:this.toObject()}}}],[{key:"isUploadFile",value:function(f){return f instanceof v}}]),v}(),g=b,a=e(85893),R=["children","submitting","onFinish","readonly"],O=["children","form","draft","initFn","saveFn"],y=function(n){var f=Object.keys(n);return f=f.filter(function(l){var j=n[l];return!!j}),f.length===0},D=function(n){return console.log(n),{type:"dayjs",value:n}},je=function(n){return J()(n.value)},ve=function(n){return J().isDayjs(n)?D(n):g.isUploadFile(n)?n.serialize():n},pe=function(n){return(n==null?void 0:n.type)==="dayjs"?je(n):(n==null?void 0:n.type)==="UploadFile"?new g(n.value.id,n.value.uid,n.value.url,n.value.name):n},S=function(n){var f=n.children,l=n.submitting,j=n.onFinish,m=n.readonly,x=H()(n,R);if(!x.name)throw new Error("Form\u7EC4\u4EF6\u5FC5\u987B\u6307\u5B9Aname\u5C5E\u6027");var Q=function(){var N=B()(i()().mark(function $(L){return i()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!l){h.next=2;break}return h.abrupt("return");case 2:if(!j){h.next=5;break}return h.next=5,j(L);case 5:case"end":return h.stop()}},$)}));return function(L){return N.apply(this,arguments)}}();return(0,a.jsx)(ue.ZP,{theme:{token:{colorTextDisabled:m?"#000":"rgba(0, 0, 0, 0.25)"}},children:(0,a.jsx)(_.Z,d()(d()({onFinish:Q},x),{},{disabled:m,children:f}))})};S.List=_.Z.List,S.ErrorList=_.Z.ErrorList,S.Item=_.Z.Item,S.useForm=_.Z.useForm,S.useWatch=_.Z.useWatch;var ye=function(n){var f=n.children,l=n.form,j=n.draft,m=n.initFn,x=n.saveFn,Q=H()(n,O),N=(0,K.useState)(!1),$=u()(N,2),L=$[0],G=$[1],h=(0,K.useState)({}),ne=u()(h,2),X=ne[0],fe=ne[1],ae=w.ZP.useMessage(),re=u()(ae,2),Y=re[0],me=re[1];(0,K.useEffect)(function(){var C=function(){var P=B()(i()().mark(function o(){var r,p,M,t,s,U;return i()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(typeof m!="function"){W.next=6;break}return W.next=3,m(l.__INTERNAL__.name);case 3:if(r=W.sent,console.log(r),r.status&&r.data){for(p=0,M=Object.entries(r.data);p<M.length;p++)t=u()(M[p],2),s=t[0],U=t[1],Array.isArray(U)?r.data[s]=U.map(function(T){return pe(T)}):r.data[s]=pe(U);fe(r.data),G(!0)}case 6:case"end":return W.stop()}},o)}));return function(){return P.apply(this,arguments)}}();j&&C()},[]);var he=function(){var C=B()(i()().mark(function P(){var o,r,p,M,t,s,U,te;return i()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!y(l.getFieldsValue())){T.next=3;break}return Y.error("\u8868\u5355\u4E3A\u7A7A\uFF0C\u6CA1\u6709\u5185\u5BB9\u53EF\u4EE5\u6682\u5B58"),T.abrupt("return");case 3:for(o=l.__INTERNAL__.name,r=l.getFieldsValue(),p=0,M=Object.entries(r);p<M.length;p++)t=u()(M[p],2),s=t[0],U=t[1],Array.isArray(U)?r[s]=U.map(function(Me){return ve(Me)}):r[s]=ve(U);if(typeof x!="function"){T.next=11;break}return T.next=9,x({form_name:o,form_data:r});case 9:te=T.sent,te.status?Y.success("\u6682\u5B58\u6210\u529F"):Y.error(te.info);case 11:case"end":return T.stop()}},P)}));return function(){return C.apply(this,arguments)}}(),V=function(){l.setFieldsValue(X),G(!1)};return(0,a.jsxs)(a.Fragment,{children:[me,(0,a.jsxs)(_.Z.Item,d()(d()({},Q),{},{children:[j&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.ZP,{type:"dashed",htmlType:"button",onClick:he,children:"\u6682\u5B58"}),(0,a.jsx)(ie.Z,{title:"\u63D0\u793A",open:L,onOk:V,onCancel:function(){return G(!1)},children:(0,a.jsx)("p",{children:"\u662F\u5426\u8981\u6062\u590D\u6682\u5B58\u7684\u8868\u5355\u6570\u636E\uFF1F"})})]}),f]}))]})};S.Buttons=ye;var Ee=e(19632),Fe=e.n(Ee),_e=e(21054),Oe=e(86919),ge=e(74956),De=["tips","value","onChange","uploadTo","hashCheck","listType"],Ce=function(){var v=B()(i()().mark(function n(f){var l;return i()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,e(84805)("./".concat(f));case 2:return l=m.sent,m.abrupt("return",l.default);case 4:case"end":return m.stop()}},n)}));return function(f){return v.apply(this,arguments)}}(),Pe=function(n){var f=n.tips,l=n.value,j=n.onChange,m=j===void 0?function(){}:j,x=n.uploadTo,Q=x===void 0?"server":x,N=n.hashCheck,$=N===void 0?!0:N,L=n.listType,G=L===void 0?"picture":L,h=H()(n,De),ne={accept:h.accept,listType:G,maxCount:h.maxCount},X=l==null?void 0:l.map(function(V){return V.toObject()}),fe=w.ZP.useMessage(),ae=u()(fe,2),re=ae[0],Y=ae[1],me=function(){var V=B()(i()().mark(function C(P){var o,r,p;return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o={file:P,action:h.action,hashId:""},!$){t.next=7;break}return t.next=4,(0,ge.ZP)();case 4:return t.next=6,(0,ge.UM)(P);case 6:o.hashId=t.sent;case 7:return t.next=9,Ce(Q);case 9:return r=t.sent,t.next=12,r.upload(o.file,o.action,o.hashId);case 12:return p=t.sent,t.abrupt("return",p);case 14:case"end":return t.stop()}},C)}));return function(P){return V.apply(this,arguments)}}(),he=function(){var C=d()(d()({},ne),{},{onChange:function(o){var r=o.file;if(console.log("changeProps",o),r.status==="done")if(r.response.status===1){var p=X||[],M={id:r.response.file_id,uid:r.uid,url:r.response.url,name:r.response.title},t=[].concat(Fe()(p),[M]);h.maxCount===1?t=t.slice(-1):t=t.slice(0,h.maxCount),m(t.map(function(s){return new g(s.id,s.uid,s.url,s.name)}))}else r.response.status===0&&re.error(r.response.info);r.status==="removed"&&m(X.filter(function(s){return s.id!==r.id}).map(function(s){return new g(s.id,s.uid,s.url,s.name)}))},defaultFileList:X,showUploadList:{showDownloadIcon:!0},customRequest:function(o){console.log("callbackProps",o),me(o.file).then(function(r){o.onSuccess(r)})}});return(0,a.jsxs)(a.Fragment,{children:[Y,(0,a.jsx)(Oe.Z,d()(d()({},C),{},{children:(0,a.jsx)(c.ZP,{icon:(0,a.jsx)(_e.Z,{}),children:"\u70B9\u51FB\u4E0A\u4F20"})})),(0,a.jsx)("span",{style:{color:"#c9c6c6"},children:f})]})};return(0,a.jsx)(he,{})}},84805:function(k,I,e){var A={"./cos":[13552,552],"./cos.ts":[13552,552],"./oss":[80503,503],"./oss.ts":[80503,503],"./server":[93928,928],"./server.ts":[93928,928],"./tos":[20311,311],"./tos.ts":[20311,311]};function u(E){if(!e.o(A,E))return Promise.resolve().then(function(){var i=new Error("Cannot find module '"+E+"'");throw i.code="MODULE_NOT_FOUND",i});var d=A[E],Z=d[0];return e.e(d[1]).then(function(){return e(Z)})}u.keys=function(){return Object.keys(A)},u.id=84805,k.exports=u}}]);
