(self.webpackChunk_quansitech_pallas_pc=self.webpackChunk_quansitech_pallas_pc||[]).push([[433],{43752:function(te,A,e){"use strict";e.r(A);var I=e(56413),o=e(24679),R=e(67294),t=e(85893),L={round:function(P,D){var Z=Math.pow(10,D);return Math.round(P*Z)/Z}};A.default=function(){var h=[{title:"\u5F00\u652F\u9879",dataIndex:"budget_name"},{title:"\u5355\u4EF7",component:"InputNumber",dataIndex:"budget_unit_price"},{title:"\u6570\u91CF",component:"InputNumber",customComponentPropsFn:function(d){if((d==null?void 0:d.key)===1)return{max:10}},dataIndex:"budget_quantity"},{title:"\u8FD9\u9879\u4E0D\u53EF\u4FEE\u6539",component:"Input",dataIndex:"no_update",editable:!1},{title:"\u5C0F\u8BA1",dataIndex:"budget_subtotal",calc:function(d){var M,p;return L.round(parseFloat((M=d==null?void 0:d.budget_unit_price)!==null&&M!==void 0?M:0)*parseFloat((p=d==null?void 0:d.budget_quantity)!==null&&p!==void 0?p:0),2)}},{title:"\u5907\u6CE8",dataIndex:"budget_remark"}],P=[{key:1,budget_name:"\u529E\u516C\u7528\u54C1",budget_unit_price:2,budget_quantity:3,no_update:"\u4E0D\u53EF\u4FEE\u6539\u7684\u503C"},{key:2,budget_name:"\u7ECF\u8D39",budget_unit_price:3,budget_quantity:4,no_update:"\u4E0D\u53EF\u4FEE\u6539\u7684\u503C"}],D=function(d){var M=0;return d.forEach(function(p){var X,m;M+=L.round(((X=p==null?void 0:p.budget_quantity)!==null&&X!==void 0?X:0)*((m=p==null?void 0:p.budget_unit_price)!==null&&m!==void 0?m:0),2)}),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(o.Z.Summary.Row,{children:[(0,t.jsx)(o.Z.Summary.Cell,{index:0,colSpan:4,children:"\u5408\u8BA1"}),(0,t.jsx)(o.Z.Summary.Cell,{index:1,children:(0,t.jsx)("span",{children:M})})]})})};return(0,t.jsx)(I.l0,{name:"editableEditable",initialValues:{data:P},children:(0,t.jsx)(I.l0.Item,{name:"data",children:(0,t.jsx)(I.r8,{columns:h,summary:D,canUpdateNum:!1,onChange:function(d){console.log(d)}})})})}},64699:function(te,A,e){"use strict";e.r(A);var I=e(15009),o=e.n(I),R=e(99289),t=e.n(R),L=e(5574),h=e.n(L),P=e(56413),D=e(50719),Z=e(88385),d=e(97019),M=e(78957),p=e(15867),X=e(67294),m=e(85893);A.default=function(){var de=(0,X.useState)(!1),ie=h()(de,2),se=ie[0],$=ie[1],ce=P.l0.useForm(),me=h()(ce,1),le=me[0],fe=function(){var w=t()(o()().mark(function S(a){return o()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return $(!0),V.next=3,fetch("/api/submit",{method:"POST",body:JSON.stringify(a)});case 3:$(!1);case 4:case"end":return V.stop()}},S)}));return function(a){return w.apply(this,arguments)}}(),he=function(){var w=t()(o()().mark(function S(a){var q,V;return o()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,fetch("/api/Staging?name=".concat(a));case 2:return q=G.sent,G.next=5,q.json();case 5:return V=G.sent,G.abrupt("return",V);case 7:case"end":return G.stop()}},S)}));return function(a){return w.apply(this,arguments)}}(),re=function(){var w=t()(o()().mark(function S(a){var q;return o()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,fetch("/api/Staging",{method:"POST",body:JSON.stringify(a)});case 2:return q=k.sent,k.next=5,q.json();case 5:return k.abrupt("return",k.sent);case 6:case"end":return k.stop()}},S)}));return function(a){return w.apply(this,arguments)}}();return(0,m.jsx)("div",{children:(0,m.jsxs)(P.l0,{name:"assitanceListForm",form:le,labelWrap:!0,labelCol:{span:8},onFinish:fe,submitting:se,children:[(0,m.jsx)(P.l0.Item,{hidden:!0,name:"assistance_list_id",children:(0,m.jsx)(D.Z,{})}),(0,m.jsx)(P.l0.Item,{name:"amount",label:"\u6551\u52A9\u91D1\u989D",rules:[{required:!0}],hasFeedback:!0,children:(0,m.jsx)(Z.Z,{addonAfter:"\u5143/\u5E74",min:0,precision:2,controls:!1})}),(0,m.jsx)(P.l0.Item,{name:"start_date",label:"\u5F00\u59CB\u65F6\u95F4",children:(0,m.jsx)(d.Z,{})}),(0,m.jsx)(P.l0.Item,{name:"file",label:"\u6587\u4EF6",children:(0,m.jsx)(P.gq,{action:"/api/upload"})}),(0,m.jsx)(P.l0.Buttons,{draft:!0,form:le,initFn:he,saveFn:re,children:(0,m.jsxs)(M.Z,{children:[(0,m.jsx)(p.ZP,{type:"primary",htmlType:"submit",loading:se,children:"\u786E\u5B9A"}),(0,m.jsx)(p.ZP,{onClick:function(){},children:"\u53D6\u6D88"})]})})]})})}},35352:function(te,A,e){"use strict";e.r(A);var I=e(56413),o=e(67294),R=e(85893);A.default=function(){var t=function(h){};return(0,R.jsx)("div",{children:(0,R.jsx)(I.gq,{action:"/api/upload?cate=image",tips:"\u4E0A\u4F20\u7EC4\u4EF6",accept:"*",maxCount:1,onChange:t,ifDrag:!0})})}},33198:function(te,A,e){"use strict";e.r(A);var I=e(15009),o=e.n(I),R=e(99289),t=e.n(R),L=e(56413),h=e(67294),P=e(15867),D=e(85893);A.default=function(){var Z=function(M){};return(0,D.jsxs)(L.l0,{name:"upload-form",onFinish:function(){var d=t()(o()().mark(function M(p){return o()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:console.log("value",p);case 1:case"end":return m.stop()}},M)}));return function(M){return d.apply(this,arguments)}}(),children:[(0,D.jsx)(L.l0.Item,{name:"upload",label:"\u4E0A\u4F20",rules:[{required:!0}],children:(0,D.jsx)(L.gq,{action:"/api/upload?cate=image",tips:"\u4E0A\u4F20\u7EC4\u4EF6",accept:"*",multiple:!0,onChange:Z})}),(0,D.jsx)(P.ZP,{htmlType:"submit",children:"\u63D0\u4EA4"})]})}},56413:function(te,A,e){"use strict";e.d(A,{zx:function(){return ve},r8:function(){return ze},l0:function(){return ne},gq:function(){return Ie}});var I=e(5574),o=e.n(I),R=e(97857),t=e.n(R),L=e(15009),h=e.n(L),P=e(99289),D=e.n(P),Z=e(13769),d=e.n(Z),M=e(28459),p=e(87174),X=e(10154),m=e(15867),de=e(27911),ie=e(27484),se=e.n(ie),$=e(67294),ce=e(12444),me=e.n(ce),le=e(72004),fe=e.n(le),he=e(9783),re=e.n(he),w=function(){function c(n,s,r,u){me()(this,c),re()(this,"id",void 0),re()(this,"uid",void 0),re()(this,"url",void 0),re()(this,"name",void 0),this.id=n,this.uid=s,this.url=r,this.name=u}return fe()(c,[{key:"toObject",value:function(){return{id:this.id,uid:this.uid,url:this.url,name:this.name}}},{key:"serialize",value:function(){return{type:"UploadFile",value:this.toObject()}}}],[{key:"isUploadFile",value:function(s){return s instanceof c}}]),c}(),S=w,a=e(85893),q=["children","submitting","onFinish","readonly"],V=["children","form","draft","initFn","saveFn"],k=function(n){var s=Object.keys(n);return s=s.filter(function(r){var u=n[r];return!!u}),s.length===0},G=function(n){return{type:"dayjs",value:n}},je=function(n){return se()(n.value)},pe=function(n){return se().isDayjs(n)?G(n):S.isUploadFile(n)?n.serialize():n},_e=function(n){return(n==null?void 0:n.type)==="dayjs"?je(n):(n==null?void 0:n.type)==="UploadFile"?new S(n.value.id,n.value.uid,n.value.url,n.value.name):n},ne=function(n){var s=n.children,r=n.submitting,u=n.onFinish,_=n.readonly,E=d()(n,q);if(!E.name)throw new Error("Form\u7EC4\u4EF6\u5FC5\u987B\u6307\u5B9Aname\u5C5E\u6027");var U=function(){var B=D()(h()().mark(function T(g){return h()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!r){x.next=2;break}return x.abrupt("return");case 2:if(!u){x.next=5;break}return x.next=5,u(g);case 5:case"end":return x.stop()}},T)}));return function(g){return B.apply(this,arguments)}}();return(0,a.jsx)(M.ZP,{theme:{token:{colorTextDisabled:_?"#000":"rgba(0, 0, 0, 0.25)"}},children:(0,a.jsx)(p.Z,t()(t()({onFinish:U},E),{},{disabled:_,children:s}))})};ne.List=p.Z.List,ne.ErrorList=p.Z.ErrorList,ne.Item=p.Z.Item,ne.useForm=p.Z.useForm,ne.useWatch=p.Z.useWatch;var ye=function(n){var s=n.children,r=n.form,u=n.draft,_=n.initFn,E=n.saveFn,U=d()(n,V),B=(0,$.useState)(!1),T=o()(B,2),g=T[0],K=T[1],x=(0,$.useState)({}),l=o()(x,2),W=l[0],j=l[1],H=X.ZP.useMessage(),b=o()(H,2),O=b[0],Y=b[1];(0,$.useEffect)(function(){var y=function(){var F=D()(h()().mark(function N(){var i,f,z,J,v,C;return h()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(typeof _!="function"){ae.next=5;break}return ae.next=3,_(r.__INTERNAL__.name);case 3:if(i=ae.sent,i.status&&i.data){for(f=0,z=Object.entries(i.data);f<z.length;f++)J=o()(z[f],2),v=J[0],C=J[1],Array.isArray(C)?i.data[v]=C.map(function(Q){return _e(Q)}):i.data[v]=_e(C);j(i.data),K(!0)}case 5:case"end":return ae.stop()}},N)}));return function(){return F.apply(this,arguments)}}();u&&y()},[]);var ee=function(){var y=D()(h()().mark(function F(){var N,i,f,z,J,v,C,oe;return h()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(!k(r.getFieldsValue())){Q.next=3;break}return O.error("\u8868\u5355\u4E3A\u7A7A\uFF0C\u6CA1\u6709\u5185\u5BB9\u53EF\u4EE5\u6682\u5B58"),Q.abrupt("return");case 3:for(N=r.__INTERNAL__.name,i=r.getFieldsValue(),f=0,z=Object.entries(i);f<z.length;f++)J=o()(z[f],2),v=J[0],C=J[1],Array.isArray(C)?i[v]=C.map(function(Ge){return pe(Ge)}):i[v]=pe(C);if(typeof E!="function"){Q.next=11;break}return Q.next=9,E({form_name:N,form_data:i});case 9:oe=Q.sent,oe.status?O.success("\u6682\u5B58\u6210\u529F"):O.error(oe.info);case 11:case"end":return Q.stop()}},F)}));return function(){return y.apply(this,arguments)}}(),ue=function(){r.setFieldsValue(W),K(!1)};return(0,a.jsxs)(a.Fragment,{children:[Y,(0,a.jsxs)(p.Z.Item,t()(t()({},U),{},{children:[u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.ZP,{type:"dashed",htmlType:"button",onClick:ee,children:"\u6682\u5B58"}),(0,a.jsx)(de.Z,{title:"\u63D0\u793A",open:g,onOk:ue,onCancel:function(){return K(!1)},children:(0,a.jsx)("p",{children:"\u662F\u5426\u8981\u6062\u590D\u6682\u5B58\u7684\u8868\u5355\u6570\u636E\uFF1F"})})]}),s]}))]})};ne.Buttons=ye;var De=e(19632),ge=e.n(De),be=e(56853),Pe=e(21054),Ce=e(10911),Ee=e(74956),xe=["tips","value","onChange","uploadTo","hashCheck","listType","ifDrag"],Oe=Ce.Z.Dragger,Fe=function(){var c=D()(h()().mark(function n(s){var r;return h()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,e(84805)("./".concat(s));case 2:return r=_.sent,_.abrupt("return",r.default);case 4:case"end":return _.stop()}},n)}));return function(s){return c.apply(this,arguments)}}(),Ie=function(n){var s=n.tips,r=n.value,u=n.onChange,_=u===void 0?function(){}:u,E=n.uploadTo,U=E===void 0?"server":E,B=n.hashCheck,T=B===void 0?!0:B,g=n.listType,K=g===void 0?"picture":g,x=n.ifDrag,l=d()(n,xe),W=t()({listType:K},l),j=r==null?void 0:r.map(function(y){var F=y.toObject();return Object.assign(F,{thumbUrl:F.url,status:"done"})}),H=X.ZP.useMessage(),b=o()(H,2),O=b[0],Y=b[1],ee=function(){var y=D()(h()().mark(function F(N){var i,f,z;return h()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(i={file:N,action:l.action,hashId:""},!T){v.next=5;break}return v.next=4,(0,Ee.UM)(N);case 4:i.hashId=v.sent;case 5:return v.next=7,Fe(U);case 7:return f=v.sent,v.next=10,f.upload(i.file,i.action,i.hashId);case 10:return z=v.sent,v.abrupt("return",z);case 12:case"end":return v.stop()}},F)}));return function(N){return y.apply(this,arguments)}}(),ue=function(){var F=t()(t()({},W),{},{onChange:function(i){var f=i.file;if(f.status==="done")if(console.log("file",f),f.response.status){var z=j||[],J={id:f.response.file_id,uid:f.uid,url:f.response.url,name:f.response.title},v=[].concat(ge()(z),[J]);l.maxCount===1?v=v.slice(-1):v=v.slice(0,l.maxCount),_(v.map(function(C){return new S(C.id,C.uid,C.url,C.name)}))}else f.response.status===0&&O.error(f.response.info);f.status==="removed"&&_(j.filter(function(C){return C.id!==f.id}).map(function(C){return new S(C.id,C.uid,C.url,C.name)}))},fileList:j,showUploadList:{showDownloadIcon:!0},customRequest:function(i){console.log("callbackProps",i),ee(i.file).then(function(f){i.onSuccess(f)})}});return(0,a.jsxs)(a.Fragment,{children:[Y,x?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(Oe,t()(t()({},F),{},{children:[(0,a.jsx)("p",{className:"ant-upload-drag-icon",children:(0,a.jsx)(be.Z,{})}),(0,a.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u62D6\u62FD\u6587\u4EF6\u5230\u6B64\u533A\u57DF\u8FDB\u884C\u4E0A\u4F20"}),(0,a.jsx)("span",{className:"drag-drop-upload-tips",children:s})]}))}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Ce.Z,t()(t()({},F),{},{children:(0,a.jsx)(m.ZP,{icon:(0,a.jsx)(Pe.Z,{}),children:"\u70B9\u51FB\u4E0A\u4F20"})})),(0,a.jsx)("span",{style:{color:"#c9c6c6"},children:s})]})]})};return(0,$.useEffect)(function(){T&&(0,Ee.ZP)()},[]),(0,a.jsx)(a.Fragment,{children:ue()})},Me=e(24679),Te=e(71230),Ae=e(50719),Ue=["onChange"],Be=function(n){var s=n.onChange,r=d()(n,Ue),u=function(E){n.onChange&&n.onChange(E.target.value)};return(0,a.jsx)(Ae.Z,t()({onChange:u},r))},Re=Be,Le=e(88385),Se=["onChange"],We=function(n){var s=n.onChange,r=d()(n,Se),u=function(E){n.onChange&&n.onChange(E)};return(0,a.jsx)(Le.Z,t()({bordered:!1,onChange:u},r))},Ze=We,$e=["children","dataIndex","onChange","component","editable","calc","customComponentProps"],Ke={Input:Re,InputNumber:Ze},Ne=(0,$.memo)(function(c){var n=c.children,s=c.dataIndex,r=c.onChange,u=c.component,_=u===void 0?"Input":u,E=c.editable,U=c.calc,B=c.customComponentProps,T=B===void 0?{}:B,g=d()(c,$e);if(U)return(0,a.jsx)("td",t()(t()({},g),{},{children:U(g.record)}));var K=t()({defaultValue:(g==null?void 0:g.record)&&(g==null?void 0:g.record[s]),onChange:r},T);return(0,a.jsx)("td",t()(t()({},g),{},{children:E?$.createElement(Ke[_],K):n}))}),ze=function(n){var s=n.value,r=n.columns,u=n.onChange,_=n.summary,E=n.canUpdateNum,U=E===void 0?!0:E,B=M.ZP.useConfig(),T=B.componentDisabled,g=r.map(function(l){return t()(t()({},l),{},{onCell:function(j){return{record:j,dataIndex:l.dataIndex,title:l.title,component:l==null?void 0:l.component,editable:l.editable===void 0?!0:l.editable,calc:l.calc,customComponentProps:typeof l.customComponentPropsFn=="function"?l.customComponentPropsFn(j):{},onChange:function(b){u&&u(s.map(function(O,Y){return O.key===j.key&&(O[l.dataIndex]=b),O}))}}}})}),K=function(W){return function(){u&&u(s.filter(function(j){return j.key!==W}))}},x=function(){var W=0,j=s!=null?s:[];j.forEach(function(b){b.key>W&&(W=b.key)});var H={};r.forEach(function(b){b.editable===!0&&(H[b.dataIndex]="")}),H.key=W+1,u&&u([].concat(ge()(j),[H]))};return!T&&U&&g.push({title:"\u64CD\u4F5C",dataIndex:"operation",editable:!1,width:"40px",render:function(W,j){return(0,a.jsx)(ve,{type:"primary",danger:!0,confirm:{title:"\u5220\u9664",description:"\u786E\u5B9A\u8981\u5220\u9664\u5417?"},onClick:K(j.key),children:"\u5220\u9664"})}}),(0,a.jsx)(Me.Z,t()(t()({pagination:!1,rowClassName:"budget-td",components:{body:{cell:Ne}},summary:_},!T&&U?{footer:function(){return(0,a.jsx)(Te.Z,{justify:"center",children:(0,a.jsx)(ve,{type:"primary",onClick:x,children:"\u65B0\u589E"})})}}:{}),{},{dataSource:s,columns:g,bordered:!0}))},ke=e(76306),Ve=["children","confirm"],ve=function(n){var s=n.children,r=n.confirm,u=d()(n,Ve),_=(0,$.useState)(!1),E=o()(_,2),U=E[0],B=E[1],T=(0,$.useState)(!1),g=o()(T,2),K=g[0],x=g[1],l=(0,$.useRef)(!1),W=function(O){r||j(O)},j=function(){var b=D()(h()().mark(function O(Y){var ee;return h()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(!l.current&&u.onClick)){y.next=9;break}return l.current=!0,ee=setTimeout(function(){B(!0),x(!0)},300),y.next=5,u.onClick();case 5:clearTimeout(ee),B(!1),x(!1),l.current=!1;case 9:case"end":return y.stop()}},O)}));return function(Y){return b.apply(this,arguments)}}(),H=function(O){var Y=O.children,ee=function(){var ue=D()(h()().mark(function y(F){return h()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,j(F);case 2:case"end":return i.stop()}},y)}));return function(F){return ue.apply(this,arguments)}}();return r&&!U?(0,a.jsx)(ke.Z,{title:r==null?void 0:r.title,description:r==null?void 0:r.description,onConfirm:ee,okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",children:Y}):Y};return(0,a.jsx)(H,{children:(0,a.jsx)(m.ZP,t()(t()({loading:U,disabled:K},u),{},{onClick:W,children:s}))})}},84805:function(te,A,e){var I={"./cos":[13552,552],"./cos.ts":[13552,552],"./oss":[80503,503],"./oss.ts":[80503,503],"./server":[93928,928],"./server.ts":[93928,928],"./tos":[20311,311],"./tos.ts":[20311,311]};function o(R){if(!e.o(I,R))return Promise.resolve().then(function(){var h=new Error("Cannot find module '"+R+"'");throw h.code="MODULE_NOT_FOUND",h});var t=I[R],L=t[0];return e.e(t[1]).then(function(){return e(L)})}o.keys=function(){return Object.keys(I)},o.id=84805,te.exports=o}}]);
