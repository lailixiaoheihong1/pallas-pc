(self.webpackChunk_quansitech_pallas_pc=self.webpackChunk_quansitech_pallas_pc||[]).push([[433],{43752:function(te,R,n){"use strict";n.r(R);var M=n(9122),m=n(24679),$=n(67294),t=n(85893),W={round:function(A,x){var N=Math.pow(10,x);return Math.round(A*N)/N}};R.default=function(){var _=[{title:"\u5F00\u652F\u9879",dataIndex:"budget_name"},{title:"\u5355\u4EF7",component:"InputNumber",dataIndex:"budget_unit_price"},{title:"\u6570\u91CF",component:"TextArea",customComponentPropsFn:function(p){return{maxLength:10,minLength:5}},dataIndex:"budget_quantity"},{title:"\u8FD9\u9879\u4E0D\u53EF\u4FEE\u6539",component:"Input",dataIndex:"no_update",editable:!1},{title:"\u5C0F\u8BA1",dataIndex:"budget_subtotal",calc:function(p){var U,C;return W.round(parseFloat((U=p==null?void 0:p.budget_unit_price)!==null&&U!==void 0?U:0)*parseFloat((C=p==null?void 0:p.budget_quantity)!==null&&C!==void 0?C:0),2)}},{title:"\u5907\u6CE8",dataIndex:"budget_remark"}],A=[{key:1,budget_name:"\u529E\u516C\u7528\u54C1",budget_unit_price:2,budget_quantity:3,no_update:"\u4E0D\u53EF\u4FEE\u6539\u7684\u503C"},{key:2,budget_name:"\u7ECF\u8D39",budget_unit_price:3,budget_quantity:4,no_update:"\u4E0D\u53EF\u4FEE\u6539\u7684\u503C"}],x=function(p){var U=0;return p.forEach(function(C){var Q,h;U+=W.round(((Q=C==null?void 0:C.budget_quantity)!==null&&Q!==void 0?Q:0)*((h=C==null?void 0:C.budget_unit_price)!==null&&h!==void 0?h:0),2)}),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(m.Z.Summary.Row,{children:[(0,t.jsx)(m.Z.Summary.Cell,{index:0,colSpan:4,children:"\u5408\u8BA1"}),(0,t.jsx)(m.Z.Summary.Cell,{index:1,children:(0,t.jsx)("span",{children:U})})]})})};return(0,t.jsx)(M.l0,{name:"editableEditable",initialValues:{data:A},children:(0,t.jsx)(M.l0.Item,{name:"data",children:(0,t.jsx)(M.r8,{columns:_,summary:x,canUpdateNum:"delete_only",onChange:function(p){console.log(p)}})})})}},64699:function(te,R,n){"use strict";n.r(R);var M=n(15009),m=n.n(M),$=n(99289),t=n.n($),W=n(5574),_=n.n(W),A=n(9122),x=n(50719),N=n(88385),p=n(97019),U=n(78957),C=n(15867),Q=n(67294),h=n(85893);R.default=function(){var de=(0,Q.useState)(!1),le=_()(de,2),ie=le[0],S=le[1],ce=A.l0.useForm(),me=_()(ce,1),oe=me[0],fe=function(){var Y=t()(m()().mark(function Z(a){return m()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return S(!0),k.next=3,fetch("/api/submit",{method:"POST",body:JSON.stringify(a)});case 3:S(!1);case 4:case"end":return k.stop()}},Z)}));return function(a){return Y.apply(this,arguments)}}(),he=function(){var Y=t()(m()().mark(function Z(a){var q,k;return m()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,fetch("/api/Staging?name=".concat(a));case 2:return q=w.sent,w.next=5,q.json();case 5:return k=w.sent,w.abrupt("return",k);case 7:case"end":return w.stop()}},Z)}));return function(a){return Y.apply(this,arguments)}}(),re=function(){var Y=t()(m()().mark(function Z(a){var q;return m()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,fetch("/api/Staging",{method:"POST",body:JSON.stringify(a)});case 2:return q=V.sent,V.next=5,q.json();case 5:return V.abrupt("return",V.sent);case 6:case"end":return V.stop()}},Z)}));return function(a){return Y.apply(this,arguments)}}();return(0,h.jsx)("div",{children:(0,h.jsxs)(A.l0,{name:"assitanceListForm",form:oe,labelWrap:!0,labelCol:{span:8},onFinish:fe,submitting:ie,children:[(0,h.jsx)(A.l0.Item,{hidden:!0,name:"assistance_list_id",children:(0,h.jsx)(x.Z,{})}),(0,h.jsx)(A.l0.Item,{name:"amount",label:"\u6551\u52A9\u91D1\u989D",rules:[{required:!0}],hasFeedback:!0,children:(0,h.jsx)(N.Z,{addonAfter:"\u5143/\u5E74",min:0,precision:2,controls:!1})}),(0,h.jsx)(A.l0.Item,{name:"start_date",label:"\u5F00\u59CB\u65F6\u95F4",children:(0,h.jsx)(p.Z,{})}),(0,h.jsx)(A.l0.Item,{name:"file",label:"\u6587\u4EF6",children:(0,h.jsx)(A.gq,{action:"/api/upload"})}),(0,h.jsx)(A.l0.Buttons,{draft:!0,form:oe,initFn:he,saveFn:re,children:(0,h.jsxs)(U.Z,{children:[(0,h.jsx)(C.ZP,{type:"primary",htmlType:"submit",loading:ie,children:"\u786E\u5B9A"}),(0,h.jsx)(C.ZP,{onClick:function(){},children:"\u53D6\u6D88"})]})})]})})}},35352:function(te,R,n){"use strict";n.r(R);var M=n(9122),m=n(67294),$=n(85893);R.default=function(){var t=function(_){};return(0,$.jsx)("div",{children:(0,$.jsx)(M.gq,{action:"/api/upload?cate=image",tips:"\u4E0A\u4F20\u7EC4\u4EF6",accept:"*",maxCount:1,onChange:t,ifDrag:!0})})}},33198:function(te,R,n){"use strict";n.r(R);var M=n(15009),m=n.n(M),$=n(99289),t=n.n($),W=n(9122),_=n(67294),A=n(15867),x=n(85893);R.default=function(){var N=function(U){};return(0,x.jsxs)(W.l0,{name:"upload-form",onFinish:function(){var p=t()(m()().mark(function U(C){return m()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:console.log("value",C);case 1:case"end":return h.stop()}},U)}));return function(U){return p.apply(this,arguments)}}(),children:[(0,x.jsx)(W.l0.Item,{name:"upload",label:"\u4E0A\u4F20",rules:[{required:!0}],children:(0,x.jsx)(W.gq,{action:"/api/upload?cate=image",tips:"\u4E0A\u4F20\u7EC4\u4EF6",accept:"*",multiple:!0,onChange:N})}),(0,x.jsx)(A.ZP,{htmlType:"submit",children:"\u63D0\u4EA4"})]})}},9122:function(te,R,n){"use strict";n.d(R,{zx:function(){return ve},r8:function(){return Ge},l0:function(){return ne},gq:function(){return Ae}});var M=n(5574),m=n.n(M),$=n(97857),t=n.n($),W=n(15009),_=n.n(W),A=n(99289),x=n.n(A),N=n(13769),p=n.n(N),U=n(28459),C=n(87174),Q=n(10154),h=n(15867),de=n(27911),le=n(27484),ie=n.n(le),S=n(67294),ce=n(12444),me=n.n(ce),oe=n(72004),fe=n.n(oe),he=n(9783),re=n.n(he),Y=function(){function c(e,r,u,l){me()(this,c),re()(this,"id",void 0),re()(this,"uid",void 0),re()(this,"url",void 0),re()(this,"name",void 0),this.id=e,this.uid=r,this.url=u,this.name=l}return fe()(c,[{key:"toObject",value:function(){return{id:this.id,uid:this.uid,url:this.url,name:this.name}}},{key:"serialize",value:function(){return{type:"UploadFile",value:this.toObject()}}}],[{key:"isUploadFile",value:function(r){return r instanceof c}}]),c}(),Z=Y,a=n(85893),q=["children","submitting","onFinish","readonly"],k=["children","form","draft","initFn","saveFn"],V=function(e){var r=Object.keys(e);return r=r.filter(function(u){var l=e[u];return!!l}),r.length===0},w=function(e){return{type:"dayjs",value:e}},je=function(e){return ie()(e.value)},_e=function(e){return ie().isDayjs(e)?w(e):Z.isUploadFile(e)?e.serialize():e},pe=function(e){return(e==null?void 0:e.type)==="dayjs"?je(e):(e==null?void 0:e.type)==="UploadFile"?new Z(e.value.id,e.value.uid,e.value.url,e.value.name):e},ne=function(e){var r=e.children,u=e.submitting,l=e.onFinish,f=e.readonly,o=p()(e,q);if(!o.name)throw new Error("Form\u7EC4\u4EF6\u5FC5\u987B\u6307\u5B9Aname\u5C5E\u6027");var b=function(){var F=x()(_()().mark(function D(v){return _()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(!u){P.next=2;break}return P.abrupt("return");case 2:if(!l){P.next=5;break}return P.next=5,l(v);case 5:case"end":return P.stop()}},D)}));return function(v){return F.apply(this,arguments)}}();return(0,a.jsx)(U.ZP,{theme:{token:{colorTextDisabled:f?"#000":"rgba(0, 0, 0, 0.25)"}},children:(0,a.jsx)(C.Z,t()(t()({onFinish:b},o),{},{disabled:f,children:r}))})};ne.List=C.Z.List,ne.ErrorList=C.Z.ErrorList,ne.Item=C.Z.Item,ne.useForm=C.Z.useForm,ne.useWatch=C.Z.useWatch;var xe=function(e){var r=e.children,u=e.form,l=e.draft,f=e.initFn,o=e.saveFn,b=p()(e,k),F=(0,S.useState)(!1),D=m()(F,2),v=D[0],L=D[1],P=(0,S.useState)({}),s=m()(P,2),B=s[0],y=s[1],G=Q.ZP.useMessage(),O=m()(G,2),T=O[0],X=O[1];(0,S.useEffect)(function(){var j=function(){var I=x()(_()().mark(function K(){var i,d,z,H,g,E;return _()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(typeof f!="function"){ae.next=5;break}return ae.next=3,f(u.__INTERNAL__.name);case 3:if(i=ae.sent,i.status&&i.data){for(d=0,z=Object.entries(i.data);d<z.length;d++)H=m()(z[d],2),g=H[0],E=H[1],Array.isArray(E)?i.data[g]=E.map(function(J){return pe(J)}):i.data[g]=pe(E);y(i.data),L(!0)}case 5:case"end":return ae.stop()}},K)}));return function(){return I.apply(this,arguments)}}();l&&j()},[]);var ee=function(){var j=x()(_()().mark(function I(){var K,i,d,z,H,g,E,se;return _()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(!V(u.getFieldsValue())){J.next=3;break}return T.error("\u8868\u5355\u4E3A\u7A7A\uFF0C\u6CA1\u6709\u5185\u5BB9\u53EF\u4EE5\u6682\u5B58"),J.abrupt("return");case 3:for(K=u.__INTERNAL__.name,i=u.getFieldsValue(),d=0,z=Object.entries(i);d<z.length;d++)H=m()(z[d],2),g=H[0],E=H[1],Array.isArray(E)?i[g]=E.map(function(Qe){return _e(Qe)}):i[g]=_e(E);if(typeof o!="function"){J.next=11;break}return J.next=9,o({form_name:K,form_data:i});case 9:se=J.sent,se.status?T.success("\u6682\u5B58\u6210\u529F"):T.error(se.info);case 11:case"end":return J.stop()}},I)}));return function(){return j.apply(this,arguments)}}(),ue=function(){u.setFieldsValue(B),L(!1)};return(0,a.jsxs)(a.Fragment,{children:[X,(0,a.jsxs)(C.Z.Item,t()(t()({},b),{},{children:[l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.ZP,{type:"dashed",htmlType:"button",onClick:ee,children:"\u6682\u5B58"}),(0,a.jsx)(de.Z,{title:"\u63D0\u793A",open:v,onOk:ue,onCancel:function(){return L(!1)},children:(0,a.jsx)("p",{children:"\u662F\u5426\u8981\u6062\u590D\u6682\u5B58\u7684\u8868\u5355\u6570\u636E\uFF1F"})})]}),r]}))]})};ne.Buttons=xe;var be=n(19632),ge=n.n(be),De=n(56853),Pe=n(21054),Ce=n(10911),Ee=n(74956),Fe=["tips","value","onChange","uploadTo","hashCheck","listType","ifDrag"],Oe=Ce.Z.Dragger,Ie=function(){var c=x()(_()().mark(function e(r){var u;return _()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,n(84805)("./".concat(r));case 2:return u=f.sent,f.abrupt("return",u.default);case 4:case"end":return f.stop()}},e)}));return function(r){return c.apply(this,arguments)}}(),Ae=function(e){var r=e.tips,u=e.value,l=e.onChange,f=l===void 0?function(){}:l,o=e.uploadTo,b=o===void 0?"server":o,F=e.hashCheck,D=F===void 0?!0:F,v=e.listType,L=v===void 0?"picture":v,P=e.ifDrag,s=p()(e,Fe),B=t()({listType:L},s),y=u==null?void 0:u.map(function(j){var I=j.toObject();return Object.assign(I,{uid:I.uid||I.id})}),G=Q.ZP.useMessage(),O=m()(G,2),T=O[0],X=O[1],ee=function(){var j=x()(_()().mark(function I(K){var i,d,z;return _()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(i={file:K,action:s.action,hashId:""},!D){g.next=5;break}return g.next=4,(0,Ee.UM)(K);case 4:i.hashId=g.sent;case 5:return g.next=7,Ie(b);case 7:return d=g.sent,g.next=10,d.upload(i.file,i.action,i.hashId);case 10:return z=g.sent,g.abrupt("return",z);case 12:case"end":return g.stop()}},I)}));return function(K){return j.apply(this,arguments)}}(),ue=function(){var I=t()(t()({},B),{},{onChange:function(i){var d=i.file;if(d.status==="done")if(d.response.status){var z=y||[],H={id:d.response.file_id,uid:d.uid,url:d.response.url,name:d.response.title},g=[].concat(ge()(z),[H]);s.maxCount===1?g=g.slice(-1):g=g.slice(0,s.maxCount),f(g.map(function(E){return new Z(E.id,E.uid,E.url,E.name)}))}else d.response.status===0&&T.error(d.response.info);d.status==="removed"&&f(y.filter(function(E){var se=d.id||d.response.file_id;return E.id!==se}).map(function(E){return new Z(E.id,E.uid,E.url,E.name)}))},defaultFileList:y,showUploadList:{showDownloadIcon:!0},onPreview:function(i){var d;window.open((i==null?void 0:i.url)||(i==null||(d=i.response)===null||d===void 0?void 0:d.url),"_blank")},customRequest:function(i){console.log("callbackProps",i),ee(i.file).then(function(d){i.onSuccess(d)})}});return(0,a.jsxs)(a.Fragment,{children:[X,P?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(Oe,t()(t()({},I),{},{children:[(0,a.jsx)("p",{className:"ant-upload-drag-icon",children:(0,a.jsx)(De.Z,{})}),(0,a.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u62D6\u62FD\u6587\u4EF6\u5230\u6B64\u533A\u57DF\u8FDB\u884C\u4E0A\u4F20"}),(0,a.jsx)("span",{className:"drag-drop-upload-tips",children:r})]}))}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Ce.Z,t()(t()({},I),{},{children:(0,a.jsx)(h.ZP,{icon:(0,a.jsx)(Pe.Z,{}),children:"\u70B9\u51FB\u4E0A\u4F20"})})),(0,a.jsx)("span",{style:{color:"#c9c6c6"},children:r})]})]})};return(0,S.useEffect)(function(){D&&(0,Ee.ZP)()},[]),(0,a.jsx)(a.Fragment,{children:ue()})},Te=n(24679),Me=n(71230),ye=n(50719),Ue=["onChange"],Be=function(e){var r=e.onChange,u=p()(e,Ue),l=function(o){e.onChange&&e.onChange(o.target.value)};return(0,a.jsx)(ye.Z,t()({onChange:l},u))},Re=Be,Se=n(88385),Le=["onChange"],$e=function(e){var r=e.onChange,u=p()(e,Le),l=function(o){e.onChange&&e.onChange(o)};return(0,a.jsx)(Se.Z,t()({bordered:!1,onChange:l},u))},We=$e,Ze=["onChange","className"],Ke=function(e){var r=window.getComputedStyle(e),u=r.getPropertyValue("box-sizing")||r.getPropertyValue("-moz-box-sizing")||r.getPropertyValue("-webkit-box-sizing"),l=parseFloat(r.getPropertyValue("padding-bottom"))+parseFloat(r.getPropertyValue("padding-top")),f=parseFloat(r.getPropertyValue("border-bottom-width"))+parseFloat(r.getPropertyValue("border-top-width")),o=e.scrollHeight;if(u==="border-box")return o+=f;if(u==="content-box")return o-=l},Ne=function(e){var r,u=e.onChange,l=e.className,f=l===void 0?"":l,o=p()(e,Ze),b=(0,S.useState)(!1),F=m()(b,2),D=F[0],v=F[1],L=(0,S.useCallback)(function(s){s&&s.resizableTextArea&&s.resizableTextArea.textArea&&o.autoSize&&(s.resizableTextArea.textArea.style.height="".concat(Ke(s.resizableTextArea.textArea),"px"))},[]),P=function(B){e.onChange&&e.onChange(B.target.value)};return(0,a.jsxs)("div",{className:"component_editable_table_text_area",children:[(0,a.jsx)(ye.Z.TextArea,t()({ref:L,className:"component_editable_table_text_area_input ".concat(D?"focus":""," ").concat(f),onChange:P,onFocus:function(){v(!0)},onBlur:function(){v(!1)}},o)),D&&o.maxLength?(0,a.jsx)("div",{className:"component_editable_table_text_area_length",children:"".concat(o!=null&&(r=o.value)!==null&&r!==void 0&&r.length?o.value.length:0," / ").concat(o.maxLength)}):""]})},ze=Ne,Ve=["children","dataIndex","onChange","component","editable","calc","customComponentProps"],ke={Input:Re,InputNumber:We,TextArea:ze},we=(0,S.memo)(function(c){var e=c.children,r=c.dataIndex,u=c.onChange,l=c.component,f=l===void 0?"Input":l,o=c.editable,b=c.calc,F=c.customComponentProps,D=F===void 0?{}:F,v=p()(c,Ve);if(b)return(0,a.jsx)("td",t()(t()({},v),{},{children:b(v.record)}));var L=t()({defaultValue:(v==null?void 0:v.record)&&(v==null?void 0:v.record[r]),onChange:u},D);return(0,a.jsx)("td",t()(t()({},v),{},{children:o?S.createElement(ke[f],L):e}))}),Ge=function(e){var r=e.value,u=e.columns,l=e.onChange,f=e.summary,o=e.canUpdateNum,b=o===void 0?!0:o,F=U.ZP.useConfig(),D=F.componentDisabled,v=u.map(function(s){return t()(t()({},s),{},{onCell:function(y){return{record:y,dataIndex:s.dataIndex,title:s.title,component:s==null?void 0:s.component,editable:s.editable===void 0?!0:s.editable,calc:s.calc,customComponentProps:typeof s.customComponentPropsFn=="function"?s.customComponentPropsFn(y):{},onChange:function(O){l&&l(r.map(function(T,X){return T.key===y.key&&(T[s.dataIndex]=O),T}))}}}})}),L=function(B){return function(){l&&l(r.filter(function(y){return y.key!==B}))}},P=function(){var B=0,y=r!=null?r:[];y.forEach(function(O){O.key>B&&(B=O.key)});var G={};u.forEach(function(O){O.editable===!0&&(G[O.dataIndex]="")}),G.key=B+1,l&&l([].concat(ge()(y),[G]))};return!D&&b&&b!=="add_only"&&v.push({title:"\u64CD\u4F5C",dataIndex:"operation",editable:!1,width:"40px",render:function(B,y){return(0,a.jsx)(ve,{type:"primary",danger:!0,confirm:{title:"\u5220\u9664",description:"\u786E\u5B9A\u8981\u5220\u9664\u5417?"},onClick:L(y.key),children:"\u5220\u9664"})}}),(0,a.jsx)(Te.Z,t()(t()({pagination:!1,rowClassName:"budget-td",components:{body:{cell:we}},summary:f},!D&&b&&b!=="delete_only"?{footer:function(){return(0,a.jsx)(Me.Z,{justify:"center",children:(0,a.jsx)(ve,{type:"primary",onClick:P,children:"\u65B0\u589E"})})}}:{}),{},{dataSource:r,columns:v,bordered:!0}))},He=n(76306),Je=["children","confirm"],ve=function(e){var r=e.children,u=e.confirm,l=p()(e,Je),f=(0,S.useState)(!1),o=m()(f,2),b=o[0],F=o[1],D=(0,S.useState)(!1),v=m()(D,2),L=v[0],P=v[1],s=(0,S.useRef)(!1),B=function(T){u||y(T)},y=function(){var O=x()(_()().mark(function T(X){var ee;return _()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(!(!s.current&&l.onClick)){j.next=9;break}return s.current=!0,ee=setTimeout(function(){F(!0),P(!0)},300),j.next=5,l.onClick();case 5:clearTimeout(ee),F(!1),P(!1),s.current=!1;case 9:case"end":return j.stop()}},T)}));return function(X){return O.apply(this,arguments)}}(),G=function(T){var X=T.children,ee=function(){var ue=x()(_()().mark(function j(I){return _()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,y(I);case 2:case"end":return i.stop()}},j)}));return function(I){return ue.apply(this,arguments)}}();return u&&!b?(0,a.jsx)(He.Z,{title:u==null?void 0:u.title,description:u==null?void 0:u.description,onConfirm:ee,okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",children:X}):X};return(0,a.jsx)(G,{children:(0,a.jsx)(h.ZP,t()(t()({loading:b,disabled:L},l),{},{onClick:B,children:r}))})}},84805:function(te,R,n){var M={"./cos":[13552,552],"./cos.ts":[13552,552],"./oss":[80503,503],"./oss.ts":[80503,503],"./server":[93928,928],"./server.ts":[93928,928],"./tos":[20311,311],"./tos.ts":[20311,311]};function m($){if(!n.o(M,$))return Promise.resolve().then(function(){var _=new Error("Cannot find module '"+$+"'");throw _.code="MODULE_NOT_FOUND",_});var t=M[$],W=t[0];return n.e(t[1]).then(function(){return n(W)})}m.keys=function(){return Object.keys(M)},m.id=84805,te.exports=m}}]);
